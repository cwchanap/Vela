openapi: 3.0.3
info:
  title: Vela Aurora DSQL Health API
  version: 1.0.0

paths:
  /internal/dsql-health:
    get:
      summary: Aurora DSQL connectivity health-check
      description: >-
        Executes a trivial query against the Aurora DSQL cluster and reports whether
        connectivity and basic configuration are working. Intended for internal use
        in non-production environments.
      responses:
        '200':
          description: DSQL connectivity is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  details:
                    type: string
                    example: "Successfully executed SELECT 1 against Aurora DSQL."
        '500':
          description: DSQL connectivity failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  error:
                    type: string
                    example: "Failed to execute test query against Aurora DSQL."
